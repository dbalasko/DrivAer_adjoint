/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | cfMesh: A library for mesh generation          |
|  \\    /   O peration     |                                                 |
|   \\  /    A nd           | Author: Franjo Juretic                          |
|    \\/     M anipulation  | E-mail: franjo.juretic@c-fields.com            |
\*---------------------------------------------------------------------------*/

FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    location    "system";
    object      meshDict;
}

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

// Main surface file (or you can merge them)
surfaceFile "constant/triSurface/combined.fms";  // We'll create this

// Base mesh cell size
maxCellSize 0.5;  // Coarse far-field mesh
//minCellSize 0.02;
// Boundary layer settings
// boundaryCellSize 0.5;  // Cell size at surfaces

// Boundary layers
boundaryLayers
{
    patchBoundaryLayers
    {
        // Body boundary layer
        "body"
        {
            nLayers           8;
            thicknessRatio    1.3;
            maxFirstLayerThickness 0.001;
            allowDiscontinuity 0;
        }

        // Wheels boundary lay//       
	"optSurface"
        {
            nLayers           8;
            thicknessRatio    1.3;
            maxFirstLayerThickness 0.001;
            allowDiscontinuity 0;
        }
    }

    optimiseLayer 1;
}

// Local refinement
localRefinement
{
    // Refinement around car body
    "body"
    {
        cellSize 0.04;
	//additionalRefinementLevels 2;
	refinementThickness 0.02;
    }

    // Refinement around wheels
    "optSurface"
    {
        cellSize 0.04;
	refinementThickness 0.02;
    }
    // Explicitly disable refinement at box boundaries
//    xMin { cellSize 0.5; }
//    xMax { cellSize 0.5; }
//    yMin { cellSize 0.5; }
//   yMax { cellSize 0.5; }
//    zMin { cellSize 0.5; }
//    zMax { cellSize 0.5; }
}

edgeMeshRefinement
{
    // Refinement around car body
    /*"body"
    {
    
    	edgeFile	"constant/extendedFeatureEdgeMesh/drivaer_combined_edgeMesh.obj";	
        additionalRefinementLevels	6;
	refinementThickness 0.02;
	
    }*/
    
    /*"wheelRL"
    {
    
    	edgeFile	"constant/extendedFeatureEdgeMesh/wheelRL_edgeMesh.obj";	
        additionalRefinementLevels	6;
	//refinementThickness 0.02;
	
    }*/

}


keepCellsIntersectingBoundary 0;

// Refinement boxes for wake and other regions
objectRefinements
{
    Box2
    {
        type box;
        cellSize 0.4;
        centre (3 0 0);
        lengthX 8;
        lengthY 3;
        lengthZ 3;
    }
    // Wake region behind car
    Box1
    {
        type box;
        cellSize 0.2;
        centre (2 0 0);
        lengthX 5;
        lengthY 2.5;
        lengthZ 2.5;
    }
    windshield_stagnation
    {
        type box;
        cellSize 0.02;
        centre (0.50 0.6 0);
        lengthX 0.3;
        lengthY 0.08;
        lengthZ 1.2;
    }

    /*front_bumper
    {
        type box;
        cellSize 0.02;
        centre (-0.65 0.15 0);
        lengthX 0.3;
        lengthY 0.5;
        lengthZ 1.6;
    }*/

    /*rear_spoiler
    {
        type box;
        cellSize 0.02;   // Coarser volume cells

        centre (3.65 0.70 0);
        lengthX 0.1;
        lengthY 0.01;
        lengthZ 1.6;
    }*/

    /*rear_diffuser
    {
        type box;
        cellSize 0.02;   // Coarser volume cells

        centre (3.7 0.0 0);
        lengthX 0.2;
        lengthY 0.05;
        lengthZ 1.6;
    }*/

    /*rear_end
    {
        type box;
        cellSize 0.02;   // Coarser volume cells

        centre (3.7 0.35 0);
        lengthX 0.3;
        lengthY 0.7;
        lengthZ 1.6;
    }*/
    // Underbody refinement
    /*wake
    {
        type box;
        cellSize 0.05;
        centre (3 0.3 0.0);
        lengthX 4;
        lengthY 1.1;
        lengthZ 1.6;
    }*/
}

// Rename boundary patches for the bounding box
renameBoundary
{
    newPatchNames
    {
        "xMin"
        {
            newName inlet;
            type    patch;
        }

        "xMax"
        {
            newName outlet;
            type    patch;
        }

        "zMin"
        {
            newName symmetry;
            type    symmetry;  // or wall
        }

        "zMax"
        {
            newName sideWall;
            type    wall;  // or wall
        }

        "yMin"
        {
            newName lowerWall;
            type    wall;
        }

        "yMax"
        {
            newName upperWall;
            type   wall;
        }
    }
}

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
